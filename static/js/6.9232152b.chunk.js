(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[6],{682:function(e,n,t){"use strict";t.r(n),t.d(n,"ChatPage",(function(){return v}));var c=t(0),s=t(219),r=t(218),a=t(301),i=t(2),o=function(e){var n=Object(c.useState)(),t=Object(s.a)(n,2),o=t[0],u=t[1],l=Object(c.useState)("pending"),j=Object(s.a)(l,2),d=j[0],v=j[1];Object(c.useEffect)((function(){var n,t=function(){v("ready")};return null===(n=e.wsChannel)||void 0===n||n.addEventListener("open",t),function(){var n;null===(n=e.wsChannel)||void 0===n||n.removeEventListener("open",t)}}),[e.wsChannel]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{style:{marginTop:"20px",marginBottom:"30px"},children:Object(i.jsx)(r.a,{placeholder:"Message",onChange:function(e){return u(e.currentTarget.value)},value:o,style:{width:"100%",height:"45px"},type:"text"})}),Object(i.jsx)("div",{children:Object(i.jsx)(a.a,{disabled:null===e.wsChannel||"ready"!==d,onClick:function(){var n;o&&(null===(n=e.wsChannel)||void 0===n||n.send(o),u(""))},children:"Send"})})]})},u=t(99),l=function(e){var n=e.message,t=Object(c.useRef)(null);return Object(c.useEffect)((function(){!function(){var e;null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}()}),[]),Object(i.jsxs)("div",{ref:t,children:[Object(i.jsx)("img",{src:n.photo})," ",Object(i.jsx)("b",{children:n.userName}),Object(i.jsx)("br",{}),Object(i.jsx)("div",{children:n.message}),Object(i.jsx)("hr",{})]})},j=function(e){var n=Object(c.useState)([]),t=Object(s.a)(n,2),r=t[0],a=t[1];return Object(c.useEffect)((function(){var n,t=function(e){var n=JSON.parse(e.data);a((function(e){return[].concat(Object(u.a)(e),Object(u.a)(n))}))};return null===(n=e.wsChannel)||void 0===n||n.addEventListener("message",t),function(){var n;null===(n=e.wsChannel)||void 0===n||n.removeEventListener("message",t)}}),[e.wsChannel]),Object(i.jsx)("div",{style:{height:"500px",overflowY:"auto"},children:r.map((function(e,n){return Object(i.jsx)(l,{message:e},n)}))})},d=function(e){var n=Object(c.useState)(null),t=Object(s.a)(n,2),r=t[0],a=t[1];return Object(c.useEffect)((function(){var e,n=function(){setTimeout(t,3e3)};function t(){var t,c;null===(t=e)||void 0===t||t.removeEventListener("close",n),null===(c=e)||void 0===c||c.close(),(e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx")).addEventListener("close",n),a(e)}return t(),function(){e.removeEventListener("close",n),e.close()}}),[]),Object(c.useEffect)((function(){}),[r]),Object(i.jsxs)("div",{children:[Object(i.jsx)(j,{wsChannel:r}),Object(i.jsx)(o,{wsChannel:r})]})},v=function(e){return Object(i.jsx)("div",{children:Object(i.jsx)(d,{})})};n.default=v}}]);
//# sourceMappingURL=6.9232152b.chunk.js.map